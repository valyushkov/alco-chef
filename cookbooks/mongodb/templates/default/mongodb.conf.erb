#
# Generated by Chef for <%= node[:fqdn] %>
# Local modifications will be overwritten.
#

# mongodb.conf

# Where to store the data.

# Note: if you run mongodb as a non-root user (recommended) you may
# need to create and set permissions for this directory manually,
# e.g., if the parent directory isn't mutable by the mongodb user.
<% if node[:mongodb][:config][:dbpath] %>
dbpath = <%= node[:mongodb][:config][:dbpath] %>
<% else %>
dbpath = /var/lib/mongodb
<% end %>

#where to log
<% if node[:mongodb][:config][:logpath] %>
logpath = <%= node[:mongodb][:config][:logpath] %>
<% else %>
logpath = /var/log/mongodb/mongodb.log
<% end %>

<% if node[:mongodb][:config][:logappend] %>
logappend = <%= node[:mongodb][:config][:logappend] %>
<% end %>

# network
<% if node[:mongodb][:config][:bind_ip] %>
bind_ip = <%= node[:mongodb][:config][:bind_ip] %>
<% else %>
bind_ip = 127.0.0.1
<% end %>

<% if node[:mongodb][:config][:port] %>
port = <%= node[:mongodb][:config][:port] %>
<% else %>
#port = 27017
<% end %>

# Enables periodic logging of CPU utilization and I/O wait
<% if node[:mongodb][:config][:cpu] %>
cpu = <%= node[:mongodb][:config][:cpu] %>
<% end %>

# Turn on/off security.  Off is currently the default
<% if node[:mongodb][:config][:noauth] %>
noauth = <%= node[:mongodb][:config][:noauth] %>
<% else %>
#noauth = true
<% end %>
<% if node[:mongodb][:config][:auth] %>
auth = <%= node[:mongodb][:config][:auth] %>
<% else %>
#auth = true
<% end %>

# Verbose logging output.
<% if node[:mongodb][:config][:verbose] %>
verbose = <%= node[:mongodb][:config][:verbose] %>
<% else %>
#verbose = true
<% end %>

# Inspect all client data for validity on receipt (useful for
# developing drivers)
<% if node[:mongodb][:config][:objcheck] %>
objcheck = <%= node[:mongodb][:config][:objcheck] %>
<% else %>
#objcheck = true
<% end %>

# Enable db quota management
<% if node[:mongodb][:config][:quota] %>
quota = <%= node[:mongodb][:config][:quota] %>
<% else %>
#quota = true
<% end %>

# Set oplogging level where n is
#   0=off (default)
#   1=W
#   2=R
#   3=both
#   7=W+some reads
<% if node[:mongodb][:config][:dialog] %>
dialog = <%= node[:mongodb][:config][:dialog] %>
<% else %>
#diaglog = 0
<% end %>

# Diagnostic/debugging option
<% if node[:mongodb][:config][:nocursor] %>
nocursor = <%= node[:mongodb][:config][:nocursor] %>
<% else %>
#nocursors = true
<% end %>

# Ignore query hints
<% if node[:mongodb][:config][:nohints] %>
nohints = <%= node[:mongodb][:config][:nohints] %>
<% else %>
#nohints = true
<% end %>

# Disable the HTTP interface (Defaults to localhost:27018).
<% if node[:mongodb][:config][:nohttpinterface] %>
nohttpinterface = <%= node[:mongodb][:config][:nohttpinterface] %>
<% else %>
#nohttpinterface = true
<% end %>

# Turns off server-side scripting.  This will result in greatly limited
# functionality
<% if node[:mongodb][:config][:noscripting] %>
noscripting = <%= node[:mongodb][:config][:noscripting] %>
<% else %>
#noscripting = true
<% end %>

# Turns off table scans.  Any query that would do a table scan fails.
<% if node[:mongodb][:config][:notablescan] %>
notablescan = <%= node[:mongodb][:config][:notablescan] %>
<% else %>
#notablescan = true
<% end %>

# Disable data file preallocation.
<% if node[:mongodb][:config][:noprealloc] %>
noprealloc = <%= node[:mongodb][:config][:noprealloc] %>
<% else %>
#noprealloc = true
<% end %>

# Specify .ns file size for new databases.
<% if node[:mongodb][:config][:nssize] %>
nssize = <%= node[:mongodb][:config][:nssize] %>
<% else %>
# nssize = <size>
<% end %>

# Accout token for Mongo monitoring server.
<% if node[:mongodb][:config][:mmstoken] %>
mms-token = <%= node[:mongodb][:config][:mmstoken] %>
<% else %>
#mms-token = <token>
<% end %>

# Server name for Mongo monitoring server.
<% if node[:mongodb][:config][:mmsname] %>
mms-name = <%= node[:mongodb][:config][:mmsname] %>
<% else %>
#mms-name = <server-name>
<% end %>

# Ping interval for Mongo monitoring server.
<% if node[:mongodb][:config][:mmssinterval] %>
mms-interval = <%= node[:mongodb][:config][:mmsinterval] %>
<% else %>
#mms-interval = <seconds>
<% end %>

# Replication Options

# in master/slave replicated mongo databases, specify here whether
# this is a slave or master
#slave = true
#source = master.example.com
# Slave only: specify a single database to replicate
#only = master.example.com
# or
#master = true
#source = slave.example.com

# in replica set configuration, specify the name of the replica set
<% if node[:mongodb][:config][:replSet] %>
replSet = <%= node[:mongodb][:config][:replSet] %>
<% end %>

<% if node[:mongodb][:config][:rest] %>
rest = <%= node[:mongodb][:config][:rest] %>
<% else %>
#rest = true
<% end %>

# Address of a server to pair with.
#pairwith = <server:port>
# Address of arbiter server.
#arbiter = <server:port>
# Automatically resync if slave data is stale
#autoresync
# Custom size for replication operation log.
#oplogSize = <MB>
# Size limit for in-memory storage of op ids.
#opIdMem = <bytes>

